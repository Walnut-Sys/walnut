language: node_js
node_js:
  - lts/*
before_install:
  - npm install -g codecov
install: npm ci
script:
  - npm run lint
  - npm run build
  - npm test
  - codecov --token=$CODECOV_TOKEN
deploy:
  provider: npm
  email: '$NPM_EMAIL'
  api_key: '$NPM_TOKEN'
  on:
    branch: main
